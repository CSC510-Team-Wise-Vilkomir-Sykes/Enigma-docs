<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Enigma-docs.src.recommend_cog &#8212; Enigma  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for Enigma-docs.src.recommend_cog</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">recommend_cog.py</span>

<span class="sd">What:</span>
<span class="sd">    The `recommend_cog` module introduces the `RecommendCog` class, a Discord bot cog tailored for song recommendations and polling based on user preferences. It facilitates interactive commands that allow users to participate in song selection polls and receive personalized music recommendations, enhancing the musical engagement within a Discord server.</span>

<span class="sd">Why:</span>
<span class="sd">    In the vibrant environment of Discord communities, music plays a pivotal role in fostering engagement and camaraderie. The `RecommendCog` empowers users to collaboratively curate playlists, discover new genres, and personalize their listening experience. By leveraging user interactions and preferences, it creates a dynamic and responsive music recommendation system that keeps the community lively and engaged.</span>

<span class="sd">How:</span>
<span class="sd">    - **/poll Command**: Users invoke the `/poll` command to initiate a poll where they are presented with a list of 10 randomly selected songs spanning various genres. Each song is associated with a unique emoji. Users can react to the message with the corresponding emojis to select up to 3 songs they prefer. These selections are then used to tailor future recommendations.</span>

<span class="sd">    - **/recommend Command**: Based on the songs selected through the `/poll` command, users can invoke the `/recommend` command to receive personalized song suggestions. The bot generates a list of recommended songs that align with the genres of the user&#39;s favorites. Users can interact with these recommendations by adding songs to their queue or requesting a new set of suggestions, ensuring a continuously evolving and personalized music experience.</span>

<span class="sd">    Example Use Cases:</span>
<span class="sd">        1. **Community Playlist Building**: Facilitate the creation of a community-driven playlist where members can vote on their favorite songs, ensuring the playlist reflects the collective taste of the group.</span>
<span class="sd">        2. **Music Discovery**: Help users explore new music by recommending tracks that align with their existing preferences, broadening their musical horizons.</span>
<span class="sd">        3. **Event Hosting**: Enhance virtual events or game nights with curated music selections that keep participants engaged and entertained.</span>

<span class="sd">Classes:</span>
<span class="sd">    RecommendCog(commands.Cog):</span>
<span class="sd">        Encapsulates the song recommendation and polling commands, managing user interactions, song selections, and the generation of personalized recommendations.</span>

<span class="sd">Functions:</span>
<span class="sd">    - poll(ctx):</span>
<span class="sd">        Initiates a song selection poll where users can choose their preferred songs by reacting with emojis. Facilitates up to 3 song selections to personalize future recommendations.</span>

<span class="sd">    - recommend(ctx):</span>
<span class="sd">        Generates and presents personalized song recommendations based on the user&#39;s previous selections from the poll. Allows users to add recommended songs to their queue or request new recommendations.</span>

<span class="sd">    - generate_recommendations(selected_songs):</span>
<span class="sd">        Processes the user&#39;s selected songs to generate a tailored list of up to 10 song recommendations, focusing on the genres of the chosen tracks while ensuring diversity in artists.</span>

<span class="sd">Dependencies:</span>
<span class="sd">    - discord.py: For creating and managing bot commands, handling message interactions, and managing embeds and reactions.</span>
<span class="sd">    - asyncio: For managing asynchronous events, particularly waiting for user reactions in real-time.</span>
<span class="sd">    - pandas: For efficient management and manipulation of song data within DataFrames.</span>
<span class="sd">    - BotState: A custom module to maintain the current state of selected songs across different bot sessions and commands.</span>
<span class="sd">    - utils: Contains helper functions, including `random_25` for selecting random song recommendations.</span>

<span class="sd">Usage:</span>
<span class="sd">    To integrate the `RecommendCog` into your Discord bot, add it to your bot instance as shown below. This will enable the polling and recommendation features within your Discord server.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from recommend_cog import RecommendCog</span>

<span class="sd">        bot = commands.Bot(command_prefix=&quot;/&quot;)</span>
<span class="sd">        bot.add_cog(RecommendCog(bot))</span>
<span class="sd">        bot.run(&#39;YOUR_BOT_TOKEN&#39;)</span>
<span class="sd">        ```</span>

<span class="sd">Notes:</span>
<span class="sd">    - The module assumes the existence of a `Song` class, which encapsulates essential track metadata such as track name, artist, and genre.</span>
<span class="sd">    - It relies on the `get_all_songs` and `get_songs_by_genre` functions to fetch and filter songs from the dataset.</span>
<span class="sd">    - Ensure that the dependencies (`discord.py`, `asyncio`, `pandas`, `BotState`, and `utils`) are correctly installed and configured in your project environment.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">discord</span>
<span class="kn">from</span> <span class="nn">discord.ext</span> <span class="kn">import</span> <span class="n">commands</span>

<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">src.bot_state</span> <span class="kn">import</span> <span class="n">BotState</span>
<span class="kn">from</span> <span class="nn">src.get_all</span> <span class="kn">import</span> <span class="n">get_all_songs</span>
<span class="kn">from</span> <span class="nn">src.get_all</span> <span class="kn">import</span> <span class="n">get_songs_by_genre</span>
<span class="kn">from</span> <span class="nn">src.song</span> <span class="kn">import</span> <span class="n">Song</span>


<div class="viewcode-block" id="RecommendCog">
<a class="viewcode-back" href="../../../autoapi/Enigma-docs/src/recommend_cog/index.html#Enigma-docs.src.recommend_cog.RecommendCog">[docs]</a>
<span class="k">class</span> <span class="nc">RecommendCog</span><span class="p">(</span><span class="n">commands</span><span class="o">.</span><span class="n">Cog</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    What:</span>
<span class="sd">        The `RecommendCog` is a Discord bot cog designed to facilitate song recommendations and polling based on user interactions. It provides commands that allow users to participate in song selection polls and receive personalized music recommendations.</span>

<span class="sd">    Why:</span>
<span class="sd">        By enabling users to actively select and receive tailored song suggestions, the cog enhances user engagement and promotes a more interactive and enjoyable musical experience within the Discord server.</span>

<span class="sd">    How:</span>
<span class="sd">        - **poll Command**: Initiates a poll where users can select their favorite songs from a randomly generated list by reacting with specific emojis.</span>
<span class="sd">        - **recommend Command**: Generates and presents song recommendations based on the user&#39;s previous selections from the poll, allowing further interaction such as adding songs to a queue or requesting new recommendations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the RecommendCog with the Discord bot instance.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            bot (commands.Bot): The Discord bot instance to which this cog is being added.</span>
<span class="sd">        &quot;&quot;&quot;</span>
<div class="viewcode-block" id="RecommendCog.bot">
<a class="viewcode-back" href="../../../autoapi/Enigma-docs/src/recommend_cog/index.html#Enigma-docs.src.recommend_cog.RecommendCog.bot">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span> <span class="o">=</span> <span class="n">bot</span>  <span class="c1"># Storing the bot instance in the cog</span></div>


    <span class="nd">@commands</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;poll&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Initiate a song selection poll for personalized recommendations&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="RecommendCog.poll">
<a class="viewcode-back" href="../../../autoapi/Enigma-docs/src/recommend_cog/index.html#Enigma-docs.src.recommend_cog.RecommendCog.poll">[docs]</a>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">poll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        What:</span>
<span class="sd">            The `/poll` command presents users with a list of 10 randomly selected songs from various genres. Users can select up to 3 songs they prefer by reacting with corresponding emojis.</span>

<span class="sd">        Why:</span>
<span class="sd">            This interactive poll allows the bot to gather user preferences, which are essential for generating personalized song recommendations that align with the user&#39;s taste.</span>

<span class="sd">        How:</span>
<span class="sd">            - Sends a message prompting users to react with number emojis corresponding to their favorite songs.</span>
<span class="sd">            - Displays a list of 10 songs with associated emojis.</span>
<span class="sd">            - Waits for the user to react to the message, capturing up to 3 song selections.</span>
<span class="sd">            - Confirms each selection and updates the bot&#39;s state with the chosen songs.</span>

<span class="sd">        Example:</span>
<span class="sd">            A user types `/poll` in the Discord channel. The bot responds with a list of 10 songs, each numbered from 1Ô∏è‚É£ to üîü. The user reacts with 1Ô∏è‚É£, 3Ô∏è‚É£, and 5Ô∏è‚É£ to select their top 3 songs, which are then used for personalized recommendations.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            ctx (commands.Context): The context of the command invocation, containing information like the channel, author, and guild.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">number_emojis</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;2Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;3Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;4Ô∏è‚É£&quot;</span><span class="p">,</span>
                         <span class="s2">&quot;5Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;6Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;7Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;8Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;9Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;üîü&quot;</span><span class="p">]</span>
        <span class="n">selected_songs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bot_message</span> <span class="o">=</span> <span class="s2">&quot;React with the numbers to the songs you like. You can select up to 3 songs.&quot;</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">bot_message</span><span class="p">)</span>

        <span class="c1"># Fetch 10 random songs by genre</span>
        <span class="n">ten_random_songs</span> <span class="o">=</span> <span class="n">get_songs_by_genre</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Create and display a list of song names with corresponding emojis</span>
        <span class="n">song_list_message</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="p">(</span><span class="n">track_name</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span> <span class="n">genre</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span>
                <span class="n">ten_random_songs</span><span class="p">[</span><span class="s2">&quot;track_name&quot;</span><span class="p">],</span>
                <span class="n">ten_random_songs</span><span class="p">[</span><span class="s2">&quot;artist_name&quot;</span><span class="p">],</span>
                <span class="n">ten_random_songs</span><span class="p">[</span><span class="s2">&quot;genre&quot;</span><span class="p">],</span>
            <span class="p">),</span>
            <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">song_list_message</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">number_emojis</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">track_name</span><span class="si">}</span><span class="s2"> by </span><span class="si">{</span><span class="n">artist</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">genre</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">poll_embed</span> <span class="o">=</span> <span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Song Selection&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">song_list_message</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mh">0x31FF00</span>
        <span class="p">)</span>
        <span class="n">react_message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">poll_embed</span><span class="p">)</span>

        <span class="c1"># Add reaction emojis for each song</span>
        <span class="k">for</span> <span class="n">emoji</span> <span class="ow">in</span> <span class="n">number_emojis</span><span class="p">[:</span> <span class="nb">len</span><span class="p">(</span><span class="n">ten_random_songs</span><span class="p">)]:</span>
            <span class="k">await</span> <span class="n">react_message</span><span class="o">.</span><span class="n">add_reaction</span><span class="p">(</span><span class="n">emoji</span><span class="p">)</span>

        <span class="c1"># Check function to validate reactions</span>
        <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">reaction</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">user</span> <span class="o">==</span> <span class="n">ctx</span><span class="o">.</span><span class="n">author</span>
                <span class="ow">and</span> <span class="n">reaction</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">react_message</span><span class="o">.</span><span class="n">id</span>
                <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">reaction</span><span class="o">.</span><span class="n">emoji</span><span class="p">)</span> <span class="ow">in</span> <span class="n">number_emojis</span>
            <span class="p">)</span>

        <span class="c1"># Collect up to 3 song selections from user reactions</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">selected_songs</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">reaction</span><span class="p">,</span> <span class="n">user</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span>
                    <span class="s2">&quot;reaction_add&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">60.0</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="n">check</span>
                <span class="p">)</span>
                <span class="n">emoji_index</span> <span class="o">=</span> <span class="n">number_emojis</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">reaction</span><span class="o">.</span><span class="n">emoji</span><span class="p">))</span>

                <span class="c1"># Check if song is already selected, to avoid duplicates</span>
                <span class="k">if</span> <span class="n">emoji_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ten_random_songs</span><span class="p">)</span> <span class="ow">and</span> <span class="n">ten_random_songs</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span>
                    <span class="n">emoji_index</span>
                <span class="p">][</span><span class="s2">&quot;track_name&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">song</span><span class="o">.</span><span class="n">track_name</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">selected_songs</span><span class="p">]:</span>
                    <span class="n">song</span> <span class="o">=</span> <span class="n">Song</span><span class="p">(</span>
                        <span class="n">track_name</span><span class="o">=</span><span class="n">ten_random_songs</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">emoji_index</span><span class="p">][</span><span class="s2">&quot;track_name&quot;</span><span class="p">],</span>
                        <span class="n">artist_name</span><span class="o">=</span><span class="n">ten_random_songs</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">emoji_index</span><span class="p">][</span>
                            <span class="s2">&quot;artist_name&quot;</span><span class="p">],</span>
                        <span class="n">genre</span><span class="o">=</span><span class="n">ten_random_songs</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">emoji_index</span><span class="p">][</span><span class="s2">&quot;genre&quot;</span><span class="p">],</span>
                    <span class="p">)</span>
                    <span class="n">selected_songs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">song</span><span class="p">)</span>

                    <span class="c1"># Confirm addition with an embedded message</span>
                    <span class="n">favorite_embed</span> <span class="o">=</span> <span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
                        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Added to Favorites&quot;</span><span class="p">,</span>
                        <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">track_name</span><span class="si">}</span><span class="s2"> by </span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">artist_name</span><span class="si">}</span><span class="s2"> &quot;</span> <span class="o">+</span>
                                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">genre</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
                        <span class="n">color</span><span class="o">=</span><span class="mh">0x00FF00</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">favorite_embed</span><span class="p">)</span>
                    <span class="c1"># Update the song queue in BotState</span>
                    <span class="n">BotState</span><span class="o">.</span><span class="n">song_queue</span> <span class="o">=</span> <span class="n">selected_songs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
                <span class="k">break</span>  <span class="c1"># End poll if user times out</span>

        <span class="c1"># Send a summary of selected songs or notify if none were selected</span>
        <span class="k">if</span> <span class="n">selected_songs</span><span class="p">:</span>
            <span class="n">summary_embed</span> <span class="o">=</span> <span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Selected Songs&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot; , &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">song</span><span class="o">.</span><span class="n">track_name</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">selected_songs</span><span class="p">]),</span>
                <span class="n">color</span><span class="o">=</span><span class="mh">0x31FF00</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">summary_embed</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;No songs were selected.&quot;</span><span class="p">)</span></div>


    <span class="nd">@commands</span><span class="o">.</span><span class="n">command</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;recommend&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Get personalized song recommendations based on your selections&quot;</span>
    <span class="p">)</span>
<div class="viewcode-block" id="RecommendCog.recommend">
<a class="viewcode-back" href="../../../autoapi/Enigma-docs/src/recommend_cog/index.html#Enigma-docs.src.recommend_cog.RecommendCog.recommend">[docs]</a>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">recommend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        What:</span>
<span class="sd">            The `/recommend` command generates and displays a list of personalized song recommendations based on the user&#39;s previously selected songs from the poll. It allows users to interact with the recommendations by adding songs to their queue or requesting new sets of suggestions.</span>

<span class="sd">        Why:</span>
<span class="sd">            By providing tailored recommendations, the bot enhances the user&#39;s music discovery experience, ensuring that suggested songs align with their established preferences and encouraging continued engagement.</span>

<span class="sd">        How:</span>
<span class="sd">            - Checks if the user has any previously selected songs. If not, prompts the user to use the `/poll` command first.</span>
<span class="sd">            - Generates a list of recommended songs based on the genres of the selected songs.</span>
<span class="sd">            - Sends an embedded message displaying the recommended songs with corresponding emojis.</span>
<span class="sd">            - Adds reaction emojis for each recommended song and control options (e.g., requesting new recommendations or stopping the session).</span>
<span class="sd">            - Listens for user reactions to either add a song to the queue, request new recommendations, or end the recommendation session.</span>

<span class="sd">        Example:</span>
<span class="sd">            After selecting favorite songs using `/poll`, a user invokes `/recommend`. The bot responds with a list of recommended songs. The user reacts with the emoji corresponding to a song to add it to their queue or with üÜï to get a fresh set of</span>
<span class="sd">            recommendations.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            ctx (commands.Context): The context of the command invocation, containing information like the channel, author, and guild.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">BotState</span><span class="o">.</span><span class="n">song_queue</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                <span class="n">embed</span><span class="o">=</span><span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;No Songs Selected&quot;</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Use `/poll` to select some songs first.&quot;</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="mh">0xFF0000</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">number_emojis</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;2Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;3Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;4Ô∏è‚É£&quot;</span><span class="p">,</span>
                         <span class="s2">&quot;5Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;6Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;7Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;8Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;9Ô∏è‚É£&quot;</span><span class="p">,</span> <span class="s2">&quot;üîü&quot;</span><span class="p">]</span>
        <span class="n">control_emojis</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;üÜï&quot;</span><span class="p">:</span> <span class="s2">&quot;new&quot;</span><span class="p">,</span> <span class="s2">&quot;‚èπÔ∏è&quot;</span><span class="p">:</span> <span class="s2">&quot;stop&quot;</span><span class="p">}</span>

        <span class="c1"># Generate initial recommendations</span>
        <span class="n">recommended_songs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_recommendations</span><span class="p">(</span><span class="n">BotState</span><span class="o">.</span><span class="n">song_queue</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">recommended_songs</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                <span class="n">embed</span><span class="o">=</span><span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;No Recommendations Found&quot;</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Try different selections.&quot;</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="mh">0xFF0000</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Display recommended songs</span>
        <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">number_emojis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">track_name</span><span class="si">}</span><span class="s2"> by </span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">artist_name</span><span class="si">}</span><span class="s2"> (&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">genre</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">song</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">recommended_songs</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">embed</span> <span class="o">=</span> <span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Recommended Songs&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mh">0x00FF00</span>
        <span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">)</span>

        <span class="c1"># Add reactions for songs and controls (new recommendations or stop)</span>
        <span class="k">for</span> <span class="n">emoji</span> <span class="ow">in</span> <span class="n">number_emojis</span><span class="p">[:</span> <span class="nb">len</span><span class="p">(</span><span class="n">recommended_songs</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span>
                <span class="n">control_emojis</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="p">):</span>
            <span class="k">await</span> <span class="n">msg</span><span class="o">.</span><span class="n">add_reaction</span><span class="p">(</span><span class="n">emoji</span><span class="p">)</span>

        <span class="c1"># Reaction-based interaction loop</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

            <span class="c1"># Check function to validate reactions</span>
            <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">reaction</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">(</span>
                    <span class="n">user</span> <span class="o">==</span> <span class="n">ctx</span><span class="o">.</span><span class="n">author</span>
                    <span class="ow">and</span> <span class="n">reaction</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">msg</span><span class="o">.</span><span class="n">id</span>
                    <span class="ow">and</span> <span class="p">(</span>
                        <span class="nb">str</span><span class="p">(</span><span class="n">reaction</span><span class="o">.</span><span class="n">emoji</span><span class="p">)</span>
                        <span class="ow">in</span> <span class="n">number_emojis</span><span class="p">[:</span> <span class="nb">len</span><span class="p">(</span><span class="n">recommended_songs</span><span class="p">)]</span>
                        <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">control_emojis</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                    <span class="p">)</span>
                <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">reaction</span><span class="p">,</span> <span class="n">user</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span>
                    <span class="s2">&quot;reaction_add&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">300.0</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="n">check</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">reaction</span><span class="o">.</span><span class="n">emoji</span><span class="p">)</span> <span class="ow">in</span> <span class="n">control_emojis</span><span class="p">:</span>
                    <span class="n">action</span> <span class="o">=</span> <span class="n">control_emojis</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">reaction</span><span class="o">.</span><span class="n">emoji</span><span class="p">)]</span>
                    <span class="c1"># Handle control actions: new recommendation or stop</span>
                    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;new&quot;</span><span class="p">:</span>
                        <span class="c1"># Get a fresh set of recommendations</span>
                        <span class="k">await</span> <span class="n">msg</span><span class="o">.</span><span class="n">clear_reactions</span><span class="p">()</span>
                        <span class="n">recommended_songs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_recommendations</span><span class="p">(</span>
                            <span class="n">BotState</span><span class="o">.</span><span class="n">song_queue</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">recommended_songs</span><span class="p">:</span>
                            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;No further recommendations found.&quot;</span><span class="p">)</span>
                            <span class="k">break</span>
                        <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">number_emojis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">track_name</span><span class="si">}</span><span class="s2"> by </span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">artist_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">genre</span><span class="si">}</span><span class="s2">)&quot;</span>
                            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">song</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">recommended_songs</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="n">embed</span> <span class="o">=</span> <span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
                            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;New Recommended Songs&quot;</span><span class="p">,</span>
                            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
                            <span class="n">color</span><span class="o">=</span><span class="mh">0x00FF00</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="k">await</span> <span class="n">msg</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">emoji</span> <span class="ow">in</span> <span class="n">number_emojis</span><span class="p">[:</span> <span class="nb">len</span><span class="p">(</span><span class="n">recommended_songs</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span>
                            <span class="n">control_emojis</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                        <span class="p">):</span>
                            <span class="k">await</span> <span class="n">msg</span><span class="o">.</span><span class="n">add_reaction</span><span class="p">(</span><span class="n">emoji</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span>
                        <span class="c1"># Stop the recommendation session</span>
                        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                            <span class="n">embed</span><span class="o">=</span><span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
                                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ending Recommendation Session&quot;</span><span class="p">,</span>
                                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Use `/recommend` command again for new recommendations.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="mh">0xFF0000</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="p">)</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Add selected song to the queue</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">number_emojis</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">reaction</span><span class="o">.</span><span class="n">emoji</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">recommended_songs</span><span class="p">):</span>
                        <span class="n">song</span> <span class="o">=</span> <span class="n">recommended_songs</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">song</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">BotState</span><span class="o">.</span><span class="n">song_queue</span><span class="p">:</span>
                            <span class="n">BotState</span><span class="o">.</span><span class="n">song_queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">song</span><span class="p">)</span>
                            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                                <span class="n">embed</span><span class="o">=</span><span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
                                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Song Added&quot;</span><span class="p">,</span>
                                    <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Added `</span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">track_name</span><span class="si">}</span><span class="s2">` by `</span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">artist_name</span><span class="si">}</span><span class="s2">` to your queue.&quot;</span><span class="p">,</span>
                                    <span class="n">color</span><span class="o">=</span><span class="mh">0x00FF00</span><span class="p">,</span>
                                <span class="p">)</span>
                            <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                                <span class="n">embed</span><span class="o">=</span><span class="n">discord</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span>
                                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Already in Queue&quot;</span><span class="p">,</span>
                                    <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">song</span><span class="o">.</span><span class="n">track_name</span><span class="si">}</span><span class="s2">` is already in your queue.&quot;</span><span class="p">,</span>
                                    <span class="n">color</span><span class="o">=</span><span class="mh">0xFFFF00</span><span class="p">,</span>
                                <span class="p">)</span>
                            <span class="p">)</span>
            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Timeout occurred. No response received.&quot;</span><span class="p">)</span>
                <span class="k">break</span></div>


<div class="viewcode-block" id="RecommendCog.generate_recommendations">
<a class="viewcode-back" href="../../../autoapi/Enigma-docs/src/recommend_cog/index.html#Enigma-docs.src.recommend_cog.RecommendCog.generate_recommendations">[docs]</a>
    <span class="k">def</span> <span class="nf">generate_recommendations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_songs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        What:</span>
<span class="sd">            Generates a list of up to 10 song recommendations based on the genres of the user&#39;s selected songs.</span>

<span class="sd">        Why:</span>
<span class="sd">            To provide users with personalized song suggestions that align with their musical preferences, enhancing their discovery of new tracks within their favored genres.</span>

<span class="sd">        How:</span>
<span class="sd">            - Aggregates the genres from the selected songs.</span>
<span class="sd">            - Filters all available songs to match these genres, excluding songs by the same artists or already selected tracks.</span>
<span class="sd">            - Shuffles the filtered list to ensure randomness and prevent bias.</span>
<span class="sd">            - Iterates through the shuffled list, adding songs to the recommendations while limiting the number of songs per artist to maintain diversity.</span>
<span class="sd">            - Returns the top 10 recommendations from the curated list.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            selected_songs (list[Song]): A list of songs selected by the user through the poll.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[Song]: A list of up to 10 recommended `Song` objects tailored to the user&#39;s genre preferences.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">recommendations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">seen_artists</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">{}</span>
        <span class="p">)</span>  <span class="c1"># Dictionary to track the number of songs recommended per artist</span>

        <span class="c1"># Fetch all songs dynamically</span>
        <span class="n">all_songs</span> <span class="o">=</span> <span class="n">get_all_songs</span><span class="p">()</span>

        <span class="c1"># Aggregate genres from all selected songs</span>
        <span class="n">genres</span> <span class="o">=</span> <span class="p">{</span><span class="n">song</span><span class="o">.</span><span class="n">genre</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">selected_songs</span><span class="p">}</span>

        <span class="c1"># Set a limit on how many times an artist can appear in the recommendations</span>
        <span class="n">artist_limit</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="c1"># Filter songs that match the genres collected and are not by the same</span>
        <span class="c1"># artists as the input songs</span>
        <span class="n">matched_songs</span> <span class="o">=</span> <span class="n">all_songs</span><span class="p">[</span>
            <span class="n">all_songs</span><span class="p">[</span><span class="s2">&quot;genre&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">genres</span><span class="p">)</span>
            <span class="o">&amp;</span> <span class="p">(</span>
                <span class="o">~</span><span class="n">all_songs</span><span class="p">[</span><span class="s2">&quot;artist_name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">song</span><span class="o">.</span><span class="n">artist_name</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">selected_songs</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="o">&amp;</span> <span class="p">(</span>
                <span class="o">~</span><span class="n">all_songs</span><span class="p">[</span><span class="s2">&quot;track_name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">song</span><span class="o">.</span><span class="n">track_name</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">selected_songs</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Shuffle the matched songs to prevent bias</span>
        <span class="n">matched_songs</span> <span class="o">=</span> <span class="n">matched_songs</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Iterate through the matched songs and add them to recommendations if</span>
        <span class="c1"># they meet the criteria</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">matched_song</span> <span class="ow">in</span> <span class="n">matched_songs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">song</span> <span class="o">=</span> <span class="n">Song</span><span class="p">(</span>
                <span class="n">track_name</span><span class="o">=</span><span class="n">matched_song</span><span class="p">[</span><span class="s2">&quot;track_name&quot;</span><span class="p">],</span>
                <span class="n">artist_name</span><span class="o">=</span><span class="n">matched_song</span><span class="p">[</span><span class="s2">&quot;artist_name&quot;</span><span class="p">],</span>
                <span class="n">genre</span><span class="o">=</span><span class="n">matched_song</span><span class="p">[</span><span class="s2">&quot;genre&quot;</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">artist_count</span> <span class="o">=</span> <span class="n">seen_artists</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">song</span><span class="o">.</span><span class="n">artist_name</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">song</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recommendations</span> <span class="ow">and</span> <span class="n">artist_count</span> <span class="o">&lt;</span> <span class="n">artist_limit</span><span class="p">:</span>
                <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">song</span><span class="p">)</span>
                <span class="n">seen_artists</span><span class="p">[</span><span class="n">song</span><span class="o">.</span><span class="n">artist_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">artist_count</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">recommendations</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">recommendations</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>  <span class="c1"># Limit to 10 recommendations</span></div>


    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="RecommendCog.setup">
<a class="viewcode-back" href="../../../autoapi/Enigma-docs/src/recommend_cog/index.html#Enigma-docs.src.recommend_cog.RecommendCog.setup">[docs]</a>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="n">client</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        What:</span>
<span class="sd">            Registers the `RecommendCog` with the Discord client.</span>

<span class="sd">        Why:</span>
<span class="sd">            To ensure that the bot recognizes and loads the cog, making its commands and functionalities available to users.</span>

<span class="sd">        How:</span>
<span class="sd">            - Adds an instance of `RecommendCog` to the provided Discord client.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            client (discord.Client): The Discord client instance to which the cog will be added.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">add_cog</span><span class="p">(</span><span class="n">RecommendCog</span><span class="p">(</span><span class="n">client</span><span class="p">))</span></div>
</div>

</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Enigma</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, CSC510 Group 6 Fall 2024.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
  </body>
</html>